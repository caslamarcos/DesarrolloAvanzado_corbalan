<h2>{{product.title}}</h2>
<p>{{product.description}}</p>
<p>Precio: ${{product.price}}</p>
<p>Categor√≠a: {{product.category}}</p>
<p>Estado: {{#if product.status}}Disponible{{else}}Sin stock{{/if}}</p>
<button onclick="addToCart('{{product._id}}')">Agregar al carrito</button>

<script>
  async function addToCart(pid) {
    const cartId = localStorage.getItem('cartId');
    if (!cartId) {
      const resCart = await fetch('/api/carts', { method:'POST' });
      const dataCart = await resCart.json();
      localStorage.setItem('cartId', dataCart.payload._id);
    }
    const cid = localStorage.getItem('cartId');
    await fetch(`/api/carts/${cid}/product/${pid}`, {
      method:'POST',
      headers:{ 'Content-Type':'application/json' },
      body: JSON.stringify({ quantity: 1 })
    });
    alert('Producto agregado');
  }
</script>